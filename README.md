# üöÄ Dohodometr - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —É—á–µ—Ç–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π

[![Security Status](https://img.shields.io/badge/Security-Hardened-green.svg)](./SECURITY.md)
[![Code Quality](https://img.shields.io/badge/Code%20Quality-A+-brightgreen.svg)](./HARD_REVIEW_REPORT.md)
[![Test Coverage](https://img.shields.io/badge/Coverage-85%25-brightgreen.svg)](#testing)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](./LICENSE)
[![Russian Laws](https://img.shields.io/badge/Compliance-RF%20Laws-red.svg)](./COMPLIANCE_RF.md)

> **–î–æ—Ö–æ–¥–æ–º–µ—Ç—Ä** ‚Äî –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É—á–µ—Ç–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ —Å –ø–æ–ª–Ω—ã–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–§.

![Dohodometr Architecture](https://via.placeholder.com/800x400/1F3B35/FFFFFF?text=Dohodometr+Architecture)

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)  
- [üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [üö¢ –î–µ–ø–ª–æ–π](#-–¥–µ–ø–ª–æ–π)
- [üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
- [üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ](#-—É—á–∞—Å—Ç–∏–µ-–≤-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
 - [üß† –ù–µ–π—Ä–æ—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)](#-–Ω–µ–π—Ä–æ—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üíº –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è–º–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å—á–µ—Ç–æ–≤ (–±—Ä–æ–∫–µ—Ä—Å–∫–∏–µ, –ò–ò–°, –ø–µ–Ω—Å–∏–æ–Ω–Ω—ã–µ)
- ‚úÖ –£—á–µ—Ç –∞–∫—Ü–∏–π, –æ–±–ª–∏–≥–∞—Ü–∏–π, ETF, –≤–∞–ª—é—Ç –∏ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
- ‚úÖ FIFO —É—á–µ—Ç –ø–æ–∑–∏—Ü–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º P&L

### üìà –ò–º–ø–æ—Ä—Ç –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç** –∏–∑ CSV/XLS –æ—Ç—á–µ—Ç–æ–≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –±—Ä–æ–∫–µ—Ä–æ–≤ –†–§:
  - üè¶ –¢–∏–Ω—å–∫–æ—Ñ—Ñ –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
  - üè¶ –°–±–µ—Ä–±–∞–Ω–∫ –ò–Ω–≤–µ—Å—Ç–æ—Ä  
  - üè¶ –í–¢–ë –ö–∞–ø–∏—Ç–∞–ª
  - üè¶ –ë–ö–°
  - üè¶ –§–∏–Ω–∞–º
  - üè¶ –û—Ç–∫—Ä—ã—Ç–∏–µ –ë—Ä–æ–∫–µ—Ä
- üìä **–†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏**: TWR, XIRR, Sharpe ratio
- üí± **–í–∞–ª—é—Ç–Ω–∞—è –ø–µ—Ä–µ–æ—Ü–µ–Ω–∫–∞** —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º–∏ –∫—É—Ä—Å–∞–º–∏ –¶–ë –†–§
- üìà **–ë–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥** —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ IMOEX, RTS, S&P 500

### üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –æ—Ç—á–µ—Ç—ã
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø–æ—Ä—Ç—Ñ–µ–ª—è
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±–µ–Ω—á–º–∞—Ä–∫–∞–º–∏ (IMOEX, S&P 500)
- –î–∏–∞–≥—Ä–∞–º–º—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –∫–ª–∞—Å—Å–∞–º –∞–∫—Ç–∏–≤–æ–≤, —Å–µ–∫—Ç–æ—Ä–∞–º, —Å—Ç—Ä–∞–Ω–∞–º
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤ –∏ –∫—É–ø–æ–Ω–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ CSV

### üéØ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ü–µ–ª–∏
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–ª–µ–π –ø–æ –∫–∞–ø–∏—Ç–∞–ª—É –∏–ª–∏ –ø–∞—Å—Å–∏–≤–Ω–æ–º—É –¥–æ—Ö–æ–¥—É
- –°—Ü–µ–Ω–∞—Ä–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—á–µ—Ç–æ–º –≤–∑–Ω–æ—Å–æ–≤ –∏ —Ä–µ–∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ü–µ–ª–µ–π

### üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –¥–∏–≤–∏–¥–µ–Ω–¥–∞—Ö –∏ —ç–∫—Å-–¥–∏–≤–∏–¥–µ–Ω–¥–Ω—ã—Ö –¥–∞—Ç–∞—Ö
- –û–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –ø–æ—Ä–æ–≥–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Ü–µ–Ω
- –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —Å–≤–æ–¥–∫–∏ –ø–æ –ø–æ—Ä—Ç—Ñ–µ–ª—é

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Dohodometr –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º:

<div align="center">

```mermaid
graph TB
    subgraph "Frontend Layer"
        FE[Next.js Frontend<br/>TypeScript + Tailwind]
        UI[shadcn/ui Components]
        FE --> UI
    end
    
    subgraph "API Gateway"
        NGINX[Nginx Reverse Proxy<br/>Rate Limiting + Security Headers]
    end
    
    subgraph "Backend Services"
        API[FastAPI Backend<br/>Python 3.12]
        AUTH[Auth Service<br/>JWT + 2FA]
        ANALYTICS[Analytics Engine<br/>Portfolio Calculations]
        IMPORT[Import Service<br/>Broker Data Processing]
        TAX[Tax Calculator<br/>Russian Tax Laws]
        
        API --> AUTH
        API --> ANALYTICS
        API --> IMPORT
        API --> TAX
    end
    
    subgraph "Data Layer"
        PG[(PostgreSQL 16<br/>Main Database)]
        REDIS[(Redis<br/>Cache + Sessions)]
        MINIO[(MinIO<br/>File Storage)]
    end
    
    subgraph "Background Processing"
        CELERY[Celery Workers<br/>Background Tasks]
        SCHEDULER[Celery Beat<br/>Scheduled Jobs]
        
        CELERY --> SCHEDULER
    end
    
    subgraph "External APIs"
        MOEX[MOEX API<br/>Russian Market Data]
        TINKOFF[Tinkoff API<br/>Broker Integration]
        CBR[CBR API<br/>Currency Rates]
    end
    
    subgraph "Monitoring"
        METRICS[Prometheus<br/>Metrics Collection]
        LOGS[Centralized Logging<br/>JSON Format]
        HEALTH[Health Checks<br/>Service Monitoring]
    end
    
    %% Frontend connections
    FE --> NGINX
    NGINX --> API
    
    %% Backend to data
    API --> PG
    API --> REDIS
    API --> MINIO
    AUTH --> REDIS
    
    %% Background processing
    API --> CELERY
    CELERY --> PG
    CELERY --> REDIS
    
    %% External API connections
    IMPORT --> MOEX
    IMPORT --> TINKOFF
    ANALYTICS --> CBR
    
    %% Monitoring connections
    API --> METRICS
    API --> LOGS
    NGINX --> LOGS
    
    %% Health checks
    API --> HEALTH
    PG --> HEALTH
    REDIS --> HEALTH
    
    %% Styling
    classDef frontend fill:#e1f5fe
    classDef backend fill:#f3e5f5
    classDef data fill:#e8f5e8
    classDef external fill:#fff3e0
    classDef monitoring fill:#fce4ec
    
    class FE,UI,NGINX frontend
    class API,AUTH,ANALYTICS,IMPORT,TAX,CELERY,SCHEDULER backend
    class PG,REDIS,MINIO data
    class MOEX,TINKOFF,CBR external
    class METRICS,LOGS,HEALTH monitoring
```

</div>

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

<table>
<tr>
<td valign="top" width="50%">

### üé® Frontend
- **Next.js 14** ‚Äî React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å SSR
- **TypeScript** ‚Äî —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS** ‚Äî utility-first CSS
- **shadcn/ui** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **React Query** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º API
- **Recharts** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

</td>
<td valign="top" width="50%">

### ‚öôÔ∏è Backend
- **Python 3.12** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Python
- **FastAPI** ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π API
- **SQLAlchemy** ‚Äî ORM —Å —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π
- **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Pydantic** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **Celery** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏

</td>
</tr>
<tr>
<td valign="top">

### üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL 16** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Redis** ‚Äî –∫–µ—à –∏ —Å–µ—Å—Å–∏–∏
- **MinIO** ‚Äî –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

</td>
<td valign="top">

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **JWT** —Å refresh —Ç–æ–∫–µ–Ω–∞–º–∏
- **TOTP 2FA** ‚Äî –¥–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Argon2** ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **AES-256-GCM** ‚Äî —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

</td>
</tr>
</table>

### Frontend  
- **Next.js 14** (App Router) + **React 18** + **TypeScript**
- **TailwindCSS** + **shadcn/ui** –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **React Query** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Recharts** –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤

### DevOps & –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Docker** + **docker-compose** –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏
- **Traefik** reverse proxy —Å **Let's Encrypt** TLS
- **Prometheus** + **Grafana** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ **OWASP ASVS L2** –∏ **OWASP Top 10**
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (AES-256-GCM)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker 20.x+
- Docker Compose 2.x+
- Node.js 18+ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ frontend)
- Python 3.12+ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ backend)

### –ó–∞–ø—É—Å–∫ –≤ development —Ä–µ–∂–∏–º–µ

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd investment-service
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:**
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, backend, frontend)
docker-compose -f docker-compose.dev.yml up -d

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:
docker-compose -f docker-compose.dev.yml up -d db redis minio  # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
docker-compose -f docker-compose.dev.yml up backend            # Backend API
docker-compose -f docker-compose.dev.yml up frontend           # Frontend
```

4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```bash
cd backend
source venv/bin/activate
alembic upgrade head
```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000
- API Docs: http://localhost:8000/docs
- Grafana: http://localhost:3001 (admin/admin)

### –ó–∞–ø—É—Å–∫ –≤ production —Ä–µ–∂–∏–º–µ

1. **–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ubuntu 22.04 LTS):**
```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω –∏ DNS
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ docker-compose
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ UFW firewall
ufw allow 22,80,443/tcp
ufw enable
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ production –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
cp env.example .env.prod
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–¥–æ–º–µ–Ω, –ø–∞—Ä–æ–ª–∏, —Å–µ–∫—Ä–µ—Ç—ã)
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ production —Å–±–æ—Ä–∫—É:**
```bash
docker-compose -f docker-compose.prod.yml up -d
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã:**
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab
0 2 * * * cd /path/to/app && docker-compose -f docker-compose.prod.yml exec -T db pg_dump -U postgres investment_db | gzip > backups/backup_$(date +\%Y\%m\%d).sql.gz
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
investment-service/
‚îú‚îÄ‚îÄ backend/                 # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/            # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/         # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/   # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tasks/          # Celery –∑–∞–¥–∞—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ migrations/         # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ tests/             # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ frontend/               # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ app/               # App Router —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ lib/              # –£—Ç–∏–ª–∏—Ç—ã –∏ API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ hooks/            # Custom React hooks
‚îî‚îÄ‚îÄ infra/                # Docker, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ postgres/
    ‚îú‚îÄ‚îÄ redis/
    ‚îú‚îÄ‚îÄ traefik/
    ‚îî‚îÄ‚îÄ prometheus/
```

## üîë –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–º–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞ –±—Ä–æ–∫–µ—Ä–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ—Ä—Ç—Ñ–µ–ª—å –∏ —Å—á–µ—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ò–º–ø–æ—Ä—Ç"
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª –æ—Ç –≤–∞—à–µ–≥–æ –±—Ä–æ–∫–µ—Ä–∞
5. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —Ñ–æ—Ä–º–∞—Ç –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã CSV:**

```csv
# –¢–∏–Ω—å–∫–æ—Ñ—Ñ
–î–∞—Ç–∞;–í—Ä–µ–º—è;–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏;–¢–∏–∫–µ—Ä;–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ;–¶–µ–Ω–∞;–°—É–º–º–∞;–í–∞–ª—é—Ç–∞;–ö–æ–º–∏—Å—Å–∏—è
01.01.2024;10:00:00;–ü–æ–∫—É–ø–∫–∞;SBER;10;250.50;2505.00;RUB;5.00

# –°–±–µ—Ä–±–∞–Ω–∫  
–î–∞—Ç–∞ —Å–¥–µ–ª–∫–∏;–û–ø–µ—Ä–∞—Ü–∏—è;–ö–æ–¥ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞;–ö–æ–ª-–≤–æ;–¶–µ–Ω–∞;–°—É–º–º–∞ —Å–¥–µ–ª–∫–∏;–í–∞–ª—é—Ç–∞;–ö–æ–º–∏—Å—Å–∏—è –±—Ä–æ–∫–µ—Ä–∞
01.01.2024;–ü–æ–∫—É–ø–∫–∞ –¶–ë;SBER;10;250.50;2505.00;RUB;5.00
```

### REST API –ø—Ä–∏–º–µ—Ä—ã

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
     http://localhost:8000/api/v1/portfolios/

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç—Ñ–µ–ª—è
curl -X POST -H "Authorization: Bearer YOUR_JWT_TOKEN" \
     -H "Content-Type: application/json" \
     -d '{"name":"–ú–æ–π –ø–æ—Ä—Ç—Ñ–µ–ª—å","base_currency":"RUB"}' \
     http://localhost:8000/api/v1/portfolios/

# –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
     "http://localhost:8000/api/v1/analytics/performance?portfolio_id=1&period=1y"
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: JWT —Å refresh —Ç–æ–∫–µ–Ω–∞–º–∏ (15 –º–∏–Ω / 7 –¥–Ω–µ–π)
- **2FA**: TOTP —Å QR-–∫–æ–¥–∞–º–∏ –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏
- **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ**: AES-256-GCM –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π**: Argon2id
- **Rate limiting**: –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
- **HTTPS**: TLS 1.2+ —Å HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
- **CORS**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤
- **–ê—É–¥–∏—Ç**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í–∫–ª—é—á–µ–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã Grafana:
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (CPU, –ø–∞–º—è—Ç—å, —Å–µ—Ç—å)
- –ú–µ—Ç—Ä–∏–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –∑–∞–ø—Ä–æ—Å—ã)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Backend —Ç–µ—Å—Ç—ã
cd backend
python -m pytest tests/ -v --cov=app

# Frontend —Ç–µ—Å—Ç—ã  
cd frontend
npm test

# E2E —Ç–µ—Å—Ç—ã
npm run test:e2e
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc
- OpenAPI JSON: http://localhost:8000/openapi.json

## üöÄ Production –î–µ–ø–ª–æ–π

### ‚ö° VPS –î–µ–ø–ª–æ–π (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
**–ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –ù–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ (Ubuntu 22.04+)
curl -fsSL https://raw.githubusercontent.com/YOUR_REPO/main/deploy_vps.sh | sudo bash
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** https://youinvest.duckdns.org  
**–°—Ç–æ–∏–º–æ—Å—Ç—å:** ~$25-30/–º–µ—Å—è—Ü  
**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:** 15-20 –º–∏–Ω—É—Ç  

**üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:**
- **[VPS_FINAL_INSTRUCTIONS.md](VPS_FINAL_INSTRUCTIONS.md)** - –ì–ª–∞–≤–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- **[VPS_REQUIREMENTS.md](VPS_REQUIREMENTS.md)** - –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- **[QUICK_VPS_SETUP.md](QUICK_VPS_SETUP.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üè† –õ–æ–∫–∞–ª—å–Ω—ã–π + Vercel –î–µ–ø–ª–æ–π
**–ì–∏–±—Ä–∏–¥–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
```bash
./deploy_youinvest.sh
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** https://www.youinvest.duckdns.org

**–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [QUICK_DEPLOY.md](QUICK_DEPLOY.md) | [PRODUCTION_DEPLOY.md](PRODUCTION_DEPLOY.md)

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- **VPS**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Å–µ—Ä–≤–∏—Å  
- **–ì–∏–±—Ä–∏–¥**: Frontend (Vercel) + Backend (–ª–æ–∫–∞–ª—å–Ω—ã–π + —Ç—É–Ω–Ω–µ–ª—å)

---

## ü§ù –í–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É (`git checkout -b feature/amazing-feature`)
3. –ö–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
4. –ó–∞–ø—É—à—å—Ç–µ –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ MIT License - —Å–º. [LICENSE](LICENSE) —Ñ–∞–π–ª.

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß Email: support@investment-service.ru
- üí¨ Telegram: @investment_service_support
- üìñ Wiki: [GitHub Wiki](../../wiki)
- üêõ Issues: [GitHub Issues](../../issues)

---

**‚≠ê –ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–Ω—ã–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥–æ—á–∫—É –Ω–∞ GitHub!**

## üß† –ù–µ–π—Ä–æ—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ (–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)

–î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ Cursor –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞: —Å–º. `docs/ops/agents-invoke.md`.