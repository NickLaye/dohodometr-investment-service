# REPORT_D — Тесты и стабильность

## 1) Запуск тестов (план/CI)

- Backend: pytest (coverage >=80% согласно pyproject). Используется SQLite in-memory файл в conftest, env для тестов настроен.
- Frontend: Vitest + jsdom; thresholds 70% в vitest.config.ts (при необходимости поднимем в Е-этапе качества).
- E2E: Playwright; теперь в CI e2e job поднимает postgres/redis/minio/бэкенд/фронтенд и ждёт health.

## 2) Стабилизация

- Добавлен `TZ=UTC` в `.github/workflows/ci.yml` — устраняет флейки по времени.
- E2E: добавлено ожидание `/health` бэкенда и главной страницы фронта; playwright устанавливается с системными deps.
- Локальная изоляция сетей: e2e запускаются на localhost, внешних сетей нет.

## 3) Что ещё проверить

- При падениях из-за времени/рандома: внедрить фиксацию `Date.now()`/моки в FE тестах; мокировать внешние API в BE.
- Опционально: поднять vitest coverage thresholds до 80% после стабилизации.

## 4) Вывод

- Базовые флейки устранены на уровне CI (TZ и health waits). Дальше — мониторить прогон и при необходимости точечно фиксить тесты.
