# üöÄ **–î–ï–ü–õ–û–ô –ü–û–õ–ù–û–ì–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø DOHODOMETR.RU**

## üìä **–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï**

‚úÖ **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ë—ç–∫–µ–Ω–¥ API: `https://dohodometr.ru/api/v1/`
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
- –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Traefik, PostgreSQL, Redis)

‚ùå **–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ù–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## üéØ **–†–ï–®–ï–ù–ò–ï**

–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–¥–∞–∫—à–µ–Ω —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º.

---

## üìã **–ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø**

### **‚ö†Ô∏è –í–ê–ñ–ù–û: –°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞!**

–ï—Å–ª–∏ –≤—á–µ—Ä–∞ –≤–Ω–æ—Å–∏–ª–∏—Å—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –∏—Ö –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@185.23.35.41
curl -O https://raw.githubusercontent.com/NickLaye/dohodometr-investment-service/main/deployment/save_server_changes.sh
chmod +x save_server_changes.sh
./save_server_changes.sh

# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ - —Å–∫–∞—á–∏–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
scp root@185.23.35.41:/opt/server_changes_*.tar.gz ./
scp root@185.23.35.41:/opt/server_changes_*_report.txt ./
```

### **1. Git Deploy (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@185.23.35.41
curl -O https://raw.githubusercontent.com/NickLaye/dohodometr-investment-service/main/deployment/git_deploy.sh
chmod +x git_deploy.sh
./git_deploy.sh
```

### **3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É**
```bash
cd /opt/dohodometr
ls -la

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# backend/         <- –ö–æ–¥ FastAPI
# frontend/        <- –ö–æ–¥ Next.js  
# deployment/      <- –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è
# .env
# docker-compose.production.yml
```

### **4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
```bash
cd /opt/dohodometr/deployment
chmod +x update_to_full_app.sh
./update_to_full_app.sh
```

---

## ‚è±Ô∏è **–í–†–ï–ú–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø**

- **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ:** ~2-3 –º–∏–Ω—É—Ç—ã
- **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤:** ~5-10 –º–∏–Ω—É—Ç  
- **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:** ~2-3 –º–∏–Ω—É—Ç—ã
- **–í—Å–µ–≥–æ:** ~10-15 –º–∏–Ω—É—Ç

---

## üîç **–ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**
```bash
curl -I https://dohodometr.ru/
```
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–µ–Ω–¥–∞:**
```bash
curl -s https://dohodometr.ru/api/v1/ | jq
curl -s https://dohodometr.ru/health | jq
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤:**
```bash
cd /opt/dohodometr
docker-compose -f docker-compose.production.yml ps
```

**–î–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å:**
- dohodometr-traefik (HEALTHY)
- dohodometr-frontend (HEALTHY)
- dohodometr-backend (HEALTHY)
- dohodometr-postgres (HEALTHY)
- dohodometr-redis (HEALTHY)

---

## üåê **–î–û–°–¢–£–ü–ù–´–ï URL –ü–û–°–õ–ï –û–ë–ù–û–í–õ–ï–ù–ò–Ø**

- **üè† –û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç:** https://dohodometr.ru (React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- **üîß API:** https://dohodometr.ru/api/v1/
- **‚ù§Ô∏è Health Check:** https://dohodometr.ru/health
- **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** https://uptime.dohodometr.ru
- **üîß Traefik:** https://traefik.dohodometr.ru

---

## ‚ö†Ô∏è **–í–ê–ñ–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø**

### **1. –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏ –≤ .env**
```bash
cd /opt/dohodometr
nano .env

# –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å 'DO_change' –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏:
SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_32_—Å–∏–º–≤–æ–ª–∞
JWT_SECRET_KEY=–≤–∞—à_jwt_–∫–ª—é—á_32_—Å–∏–º–≤–æ–ª–∞
POSTGRES_PASSWORD=–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_–±–∞–∑—ã
REDIS_PASSWORD=–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å_redis
```

### **2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø–æ—Å–ª–µ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª–µ–π**
```bash
docker-compose -f docker-compose.production.yml restart
```

### **3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**
```bash
# –õ–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
docker-compose logs frontend | tail -20

# –õ–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞
docker-compose logs backend | tail -20

# –õ–æ–≥–∏ Traefik
docker-compose logs traefik | tail -20
```

---

## üõ†Ô∏è **TROUBLESHOOTING**

### **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –±–∏–ª–¥–∏—Ç—Å—è:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏
docker-compose logs frontend

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å –Ω—É–ª—è
docker-compose build --no-cache frontend
docker-compose up -d frontend
```

### **–ë—ç–∫–µ–Ω–¥ –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—à–∏–±–∫–∏
docker-compose logs backend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker-compose exec postgres psql -U postgres -d dohodometr -c "SELECT 1;"
```

### **SSL –ø—Ä–æ–±–ª–µ–º—ã:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Traefik –ª–æ–≥–∏
docker-compose logs traefik | grep -i "acme\|letsencrypt"

# –ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
docker-compose restart traefik
```

### **–ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:**
```bash
docker-compose down
docker-compose up -d
```

---

## üìà **–§–£–ù–ö–¶–ò–ò –ü–û–õ–ù–û–ì–û –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø**

### **Frontend (React/Next.js):**
- üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º
- üë§ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- üìä –î–∞—à–±–æ—Ä–¥ –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π
- üí∞ –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
- üì± –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

### **Backend (FastAPI):**
- üîê JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- üìä API –¥–ª—è –ø–æ—Ä—Ç—Ñ–µ–ª–µ–π
- üí± API –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üìà –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å
- üí∞ –ù–∞–ª–æ–≥–æ–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –†–§
- üè¶ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¢–∏–Ω—å–∫–æ—Ñ—Ñ API (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

### **Infrastructure:**
- üîí SSL –æ—Ç Let's Encrypt
- üöÄ HTTP/2 –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏
- üíæ PostgreSQL + Redis
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏

---

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

1. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (Uptime Kuma)
3. ‚úÖ **–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø—ã** –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å email** —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
5. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å –±—Ä–æ–∫–µ—Ä–∞–º–∏

---

## üèÜ **–†–ï–ó–£–õ–¨–¢–ê–¢**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —É –≤–∞—Å –±—É–¥–µ—Ç:

- ‚úÖ **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –Ω–∞ https://dohodometr.ru
- ‚úÖ **REST API** —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** —Å SSL
- ‚úÖ **–†–æ—Å—Å–∏–π—Å–∫–∏–π –Ω–∞–ª–æ–≥–æ–≤—ã–π –º–æ–¥—É–ª—å**
- ‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é**

üöÄ **Dohodometr.ru –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**
