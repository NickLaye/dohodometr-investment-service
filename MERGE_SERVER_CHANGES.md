# üö® **–ü–õ–ê–ù –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –ò–ó–ú–ï–ù–ï–ù–ò–ô –° –°–ï–†–í–ï–†–ê**

## **–ü–†–û–ë–õ–ï–ú–ê**
–í—á–µ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–æ—Å–∏–ª–∏—Å—å –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ `/opt/dohodometr/backend/`, –Ω–æ –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –ª–æ–∫–∞–ª—å–Ω—ã–º git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.

–ü—Ä–∏ git deploy —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è **–ë–£–î–£–¢ –ü–û–¢–ï–†–Ø–ù–´**.

---

## **–°–†–û–ß–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø**

### **1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@185.23.35.41
cd /opt/dohodometr

# –ü–æ–ª–Ω—ã–π –±—ç–∫–∞–ø
tar -czf server_changes_$(date +%Y%m%d_%H%M%S).tar.gz \
  backend/ deployment/ .env logs/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git (–µ—Å–ª–∏ –µ—Å—Ç—å)
cd backend
git status
git diff HEAD~1  # –ü–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

### **2. –°–∫–∞—á–∞—Ç—å –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É**
```bash
# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
scp root@185.23.35.41:/opt/dohodometr/server_changes_*.tar.gz ./

# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
tar -xzf server_changes_*.tar.gz
```

### **3. –°—Ä–∞–≤–Ω–∏—Ç—å —Ñ–∞–π–ª—ã**
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
- `backend/app/models/*.py` - –º–æ–¥–µ–ª–∏ –ë–î
- `backend/app/core/database*.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
- `backend/app/repositories/*.py` - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- `backend/alembic/versions/*.py` - –º–∏–≥—Ä–∞—Ü–∏–∏

---

## **–ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï**

### **–í–∞—Ä–∏–∞–Ω—Ç A: –†—É—á–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ**
1. –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é
2. –ü–µ—Ä–µ–Ω–æ—Å–∏–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–¥
3. –ö–æ–º–º–∏—Ç–∏–º –∏ –¥–µ–ø–ª–æ–∏–º —á–µ—Ä–µ–∑ git

### **–í–∞—Ä–∏–∞–Ω—Ç B: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ª–∏—è–Ω–∏–µ**
```bash
# –°–æ–∑–¥–∞–µ–º –≤–µ—Ç–∫—É –¥–ª—è —Å–ª–∏—è–Ω–∏—è
git checkout -b merge-server-changes

# –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–≤–µ—Ä—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö
cp -r server_backup/backend/* backend/

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
git diff

# –ö–æ–º–º–∏—Ç–∏–º –µ—Å–ª–∏ –≤—Å–µ –û–ö
git add .
git commit -m "Merge server changes: –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å –ë–î"

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ main –∏ —Å–ª–∏–≤–∞–µ–º
git checkout main
git merge merge-server-changes
```

---

## **–ö–û–ù–ö–†–ï–¢–ù–´–ï –í–û–ü–†–û–°–´**

–ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–æ—Å–∏–ª–∏—Å—å –≤—á–µ—Ä–∞?

1. **–ú–æ–¥–µ–ª–∏ –ë–î**: –ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã/–ø–æ–ª—è –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å?
2. **–°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–ª–æ—Å—å –≤ database.py?
3. **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –°–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –ª–∏ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏?
4. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏**: –û–±–Ω–æ–≤–ª—è–ª–∏—Å—å –ª–∏ —Ñ–∞–π–ª—ã –≤ repositories/?

---

## **–ë–ï–ó–û–ü–ê–°–ù–´–ô –î–ï–ü–õ–û–ô**

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. ‚úÖ **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ**
2. ‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ**  
3. ‚úÖ **–ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –≤ git**
4. ‚úÖ **–ó–∞–¥–µ–ø–ª–æ–∏—Ç—å —á–µ—Ä–µ–∑ git**

---

## **–ö–û–ú–ê–ù–î–´ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –ù–ê –°–ï–†–í–ï–†–ï**

```bash
# –ö–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑–º–µ–Ω—è–ª–∏—Å—å –≤—á–µ—Ä–∞
find /opt/dohodometr/backend -type f -mtime -1 -name "*.py" | head -20

# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª—è—Ö
ls -la /opt/dohodometr/backend/app/models/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
ls -la /opt/dohodometr/backend/migrations/versions/ | tail -5

# –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
docker-compose exec postgres psql -U postgres -d dohodometr -c "\dt"
```

---

## **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø**

**–ù–ï –ó–ê–ü–£–°–ö–ê–¢–¨ git deploy** –ø–æ–∫–∞ –Ω–µ —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!

–°–Ω–∞—á–∞–ª–∞:
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–¥  
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
4. –¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º –¥–µ–ø–ª–æ–∏—Ç—å —á–µ—Ä–µ–∑ git
