# üöÄ –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø –°–ï–†–í–ï–†–ê DOHODOMETR.RU

# ==============================================
# 1. –ü–û–î–ö–õ–Æ–ß–ò–¢–¨–°–Ø –ö –°–ï–†–í–ï–†–£
# ==============================================
ssh root@185.23.35.41

# ==============================================
# 2. –°–û–ó–î–ê–¢–¨ –†–ê–ë–û–ß–£–Æ –î–ò–†–ï–ö–¢–û–†–ò–Æ
# ==============================================
mkdir -p /opt/dohodometr-deploy/deployment
cd /opt/dohodometr-deploy/deployment

# ==============================================
# 3. –°–ö–û–ü–ò–†–û–í–ê–¢–¨ –§–ê–ô–õ–´ –° –õ–û–ö–ê–õ–¨–ù–û–ô –ú–ê–®–ò–ù–´
# ==============================================

# –° –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
# scp -r deployment/ root@185.23.35.41:/opt/dohodometr-deploy/

# –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é (—Å–º. –Ω–∏–∂–µ)

# ==============================================
# 4. –û–°–ù–û–í–ù–´–ï –§–ê–ô–õ–´ –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø
# ==============================================

# docker-compose.production.yml
# environment.production  
# deploy.sh
# html/index.html
# html/404.html
# nginx/nginx.conf

# ==============================================
# 5. –ó–ê–ü–£–°–ö –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –î–ï–ü–õ–û–Ø
# ==============================================
chmod +x deploy.sh
./deploy.sh

# ==============================================
# 6. –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê
# ==============================================

# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL
curl -I https://dohodometr.ru

# –õ–æ–≥–∏ Traefik
docker-compose logs traefik | tail -20

# ==============================================
# 7. –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´
# ==============================================

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose restart

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
docker-compose down && docker-compose up -d

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker-compose logs -f traefik

# ==============================================
# 8. –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
# ==============================================

# ‚úÖ https://dohodometr.ru - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∑–µ–ª–µ–Ω—ã–º –∑–∞–º–∫–æ–º
# ‚úÖ HTTP –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ HTTPS  
# ‚úÖ –ö—Ä–∞—Å–∏–≤–∞—è landing page –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
# ‚úÖ SSL Grade A –∏–ª–∏ A+ –Ω–∞ ssllabs.com

# ==============================================
# 9. –í–ê–ñ–ù–û –ü–û–°–õ–ï –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø
# ==============================================

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏
cat /opt/dohodometr/PASSWORDS.txt

# –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –ø–∞—Ä–æ–ª–µ–π –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
rm /opt/dohodometr/PASSWORDS.txt

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email –ø–∞—Ä–æ–ª—å –≤ .env
nano /opt/dohodometr/.env
